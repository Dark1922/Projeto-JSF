<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>

	<title>Cadastro de Usuário</title>

</h:head>

<h:body>

	<ui:include src="/menu.xhtml"></ui:include>





	<h2 style="text-align: center;">Projeto JSF Teste de aplicação</h2>

	<h:messages
		style="text-align: center; color: green; font-size: 17px; list-style-type: none;" />

	<h:form id="formPessoa" style="display:grid; justify-content: center;"
		rendered="#{pessoaBean.permiteAcesso('ADMINISTRADOR')}">

		<h:panelGrid columns="2" style="margin: 20px ">



			<f:facet name="header">
				<h:outputText value="Cadastro de Uusário" style="text-align:center" />
			</f:facet>

			<h:outputLabel value="Id:" />
			<h:inputText value="#{pessoaBean.pessoa.id}" readonly="true" />

			<h:outputLabel value="Nome:" />
			<h:inputText value="#{pessoaBean.pessoa.nome}" required="true"
				requiredMessage="Informe o Nome de usuário"
				validatorMessage="Nome tem que ter no minímo 4 caracteres">
				<f:validateLength maximum="50" minimum="4" />
			</h:inputText>


			<h:outputLabel value="Sobreome:" />
			<h:inputText value="#{pessoaBean.pessoa.sobrenome}" required="true"
				requiredMessage="Informe o Sobrenome de usuário" />

			<h:outputLabel value="Idade:" />
			<h:inputText value="#{pessoaBean.pessoa.idade}" required="true"
				requiredMessage="Informe a Idade do usuário" />

			<h:outputLabel value="Nascimento:" />
			<h:inputText value="#{pessoaBean.pessoa.dataNascimento}"
				converterMessage="Data de nacimento errada" required="true"
				requiredMessage="Informe a Data de Nascimento dd/MM/yyyy" >
			<f:convertDateTime pattern="dd/MM/yyyy" locale="pt_BR"
				timeZone="GMT-03:00" />
			</h:inputText>

			<h:outputLabel value="Programador:" />
			<h:selectOneMenu id="campoProgramador"
				value="#{pessoaBean.pessoa.nivelProgramador}">

				<f:selectItem itemValue="NAO-SELECIONADO" itemLabel="Selecione"
					noSelectionOption="true" />
				<f:selectItem itemValue="J" itemLabel="Junior" />
				<f:selectItem itemValue="P" itemLabel="Pleno" />
				<f:selectItem itemValue="S" itemLabel="Senior" />
				<f:selectItem itemValue="E" itemLabel="Especialista" />
			</h:selectOneMenu>
			
			<h:outputLabel  value="CEP:"/>
			<h:inputText value="#{pessoaBean.pessoa.cep}">
			<f:ajax event="blur" execute="@this" render="" listener="#{pessoaBean.pesquisaCep}"/>
			</h:inputText>
 
			<h:outputLabel value="Ativo" />
			<h:selectBooleanCheckbox value="#{pessoaBean.pessoa.ativo}" />

			<h:outputLabel value="Frameworks" />
			<h:selectManyMenu id="campoframeworks"
				value="#{pessoaBean.pessoa.frameworks}"
				style="height: 100px; border: nome; width: 175px; text-align: center; padding: 8px;">
				<f:selectItem itemValue="Hibernate" />
				<f:selectItem itemValue="Sprign Mvc" />
				<f:selectItem itemValue="Jpa" />
				<f:selectItem itemValue="PrimeFaces" />
				<f:selectItem itemValue="JSF" />
			</h:selectManyMenu>

			<h:outputLabel value="Login:" />
			<h:inputText value="#{pessoaBean.pessoa.login}" required="true" requiredMessage="Informe o Login"
				validatorMessage="Nome tem que ter no minímo  6 caracteres / Máx 20">
				<f:validateLength maximum="20" minimum="6" />
			</h:inputText>

			<h:outputLabel value="Senha:" />
			<h:inputSecret value="#{pessoaBean.pessoa.senha}" required="true" requiredMessage="Informe a Senha"
				validatorMessage="Nome tem que ter no minímo 6 caracteres / Máx 20">
				<f:validateLength maximum="20" minimum="6" />
			</h:inputSecret>



			<h:outputLabel value="Perfil:" />
			<h:selectOneMenu id="Perfil" value="#{pessoaBean.pessoa.perfilUser}"
				required="true" requiredMessage="Informe o Perfil de usuário">

				<f:selectItem itemValue="NAO" itemLabel="Selecione"
					noSelectionOption="true" />
				<f:selectItem itemValue="ADMINISTRADOR" itemLabel="Administrador" />
				<f:selectItem itemValue="SECRETARIO" itemLabel="Secretário" />
				<f:selectItem itemValue="ESTAGIARIO" itemLabel="Estagiário" />
			</h:selectOneMenu>
			<h:outputLabel />

			<!-- itemValue é oque vai pro banco de dados o label é o que parece na tela-->
			<h:outputLabel value="Sexo:" />
			<h:selectOneRadio value="#{pessoaBean.pessoa.sexo}" required="true"
				requiredMessage="Informe o Sexo de usuário">
				<f:selectItem itemValue="MASCULINO" itemLabel="Masculino" />
				<f:selectItem itemValue="FEMININO" itemLabel="Feminino" />
			</h:selectOneRadio>


			<h:outputLabel value="Linguagens:" />
			<h:selectManyCheckbox value="#{pessoaBean.pessoa.linguagens}">
				<f:selectItem itemValue="1" itemLabel="Java" />
				<f:selectItem itemValue="2" itemLabel="Php" />
				<f:selectItem itemValue="3" itemLabel="Python" />
				<f:selectItem itemValue="4" itemLabel="C#" />
				<f:selectItem itemValue="5" itemLabel="NodeJs" />
			</h:selectManyCheckbox>

			<h:outputLabel />
			<h:panelGroup>
				<h:commandButton id="botaoNovo" style="margin-left: 6px; margin-top: 7px;"
					value="Novo" action="#{pessoaBean.novo}"
					image="/resources/img/Novo (2).png" title="Novo" > 
					<f:ajax  execute="botaoNovo" render="@form"/>
					</h:commandButton>
				<h:commandButton style="margin-left: 6px; margin-top: 7px;"
					value="Salvar" action="#{pessoaBean.salvar}"
					image="/resources/img/salvar.png" title="Salvar" />
				<h:commandButton style="margin-left: 6px; margin-top: 7px;"
					value="Remover" action="#{pessoaBean.remove}"
					image="/resources/img/excluir.png" title="Excluir" />
				<h:commandButton style="margin-left: 6px; margin-top: 7px;"
					value="Limpar" action="#{pessoaBean.limpar}" id="botaoResetar"
					image="resources/img/power_reset_1847.png" title="Resetar" > 
					<f:ajax execute="botaoResetar" render="@form"/>
					</h:commandButton>
			</h:panelGroup>

		</h:panelGrid> 

	</h:form>


	<h:form id="formTable" style="display:grid; justify-content: center;"
		rendered="#{pessoaBean.permiteAcesso('ADMINISTRADOR')}">

		<h:dataTable value="#{pessoaBean.pessoas}" var="pessoa" border="3"
			style="text-align:center" cellpadding="6">

			<f:facet name="header">
		 Lista de Usuários Cadastrados
		</f:facet>

			<h:column>
				<f:facet name="header">Id</f:facet>
				<h:outputText value="#{pessoa.id}" />
			</h:column>

			<h:column>
				<f:facet name="header">Nome</f:facet>
				<h:outputText value="#{pessoa.nome}" />
			</h:column>

			<h:column>
				<f:facet name="header">Sobrenome</f:facet>
				<h:outputText value="#{pessoa.sobrenome}" />
			</h:column>

			<h:column>
				<f:facet name="header">Idade</f:facet>
				<h:outputText value="#{pessoa.idade}" />
			</h:column>

			<h:column>
				<f:facet name="header">Editar</f:facet>
				<h:commandLink>
					<f:setPropertyActionListener value="#{pessoa}"
						target="#{pessoaBean.pessoa}" />
					<h:graphicImage value="/resources/img/editar.png" title="Editar" />
				</h:commandLink>
			</h:column>

			<h:column rendered="#{pessoaBean.permiteAcesso('ADMINISTRADOR')}">
				<f:facet name="header">Excluir</f:facet>

				<h:commandLink action="#{pessoaBean.remove}">
					<f:setPropertyActionListener value="#{pessoa}"
						target="#{pessoaBean.pessoa}" />
					<h:graphicImage value="/resources/img/excluir.png" title="Excluir" />
				</h:commandLink>



			</h:column>


		</h:dataTable>
	</h:form>

</h:body>
</html>
<!--required="true"  requiredMessage="Informe o Nome de usuário" validatorMessage="Nome tem que ter no minímo 4 caracteres">
		      <f:validateLength maximum="50" minimum="4"/>
			</h:inputText>  -->